:root{
  --bg:#0b0f14; --panel:#111826; --ink:#e5eef7; --muted:#9ab1c7; --acc:#7dd3fc; --danger:#ef4444; --ok:#22c55e; --warn:#f59e0b;
  --card:#162235; --card2:#0f1828; --glow:0 10px 30px rgba(125,211,252,.25);
}
*{box-sizing:border-box}
html,body{height:100%;}
body{margin:0;background:radial-gradient(1200px 900px at 80% -10%,#142034 0%,#0b0f14 60%);color:var(--ink);font:16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";touch-action:manipulation;}

.wrap{max-width:1100px;margin-inline:auto;padding:16px;display:grid;gap:12px;grid-template-columns:260px 1fr;grid-template-areas:"sidebar game";}


.panel{background:linear-gradient(180deg,var(--panel),#0c1320);border:1px solid #1a2740;border-radius:16px;padding:14px;box-shadow:var(--glow)}

.sidebar{grid-area:sidebar;display:grid;gap:10px;align-content:start}
.stat{display:grid;grid-template-columns:1fr auto;gap:6px;align-items:center;padding:10px;border-radius:12px;background:linear-gradient(180deg,var(--card),var(--card2));border:1px solid #1b2b44}
.stat small{color:var(--muted)}

.next{display:flex;align-items:center;gap:8px;padding:10px;border-radius:12px;background:#0f1a2b;border:1px dashed #1c2d4b}
.next strong{font-size:1rem}

.controls{display:flex;gap:8px;flex-wrap:wrap}
button.primary{background:linear-gradient(180deg,#2ea7ff,#1e90ff);color:white;font-weight:700;border:none;padding:.7rem 1rem;border-radius:12px;cursor:pointer;box-shadow:0 6px 18px rgba(46,167,255,.3)}
button.secondary{background:#0f1a2b;border:1px solid #21324f;color:#bcd; padding:.6rem .9rem;border-radius:10px;cursor:pointer}
button:disabled{opacity:.65;cursor:not-allowed}

.game{grid-area:game;position:relative;overflow:hidden;min-height:580px;border-radius:16px;background:
  radial-gradient(1200px 600px at -30% -50%, rgba(125,211,252,.05), transparent 60%),
  radial-gradient(900px 600px at 130% -30%, rgba(239,68,68,.06), transparent 50%),
  linear-gradient(180deg,#0c1322,#0a0f19);
  border:1px solid #1b2a45;
}

.timerbar{height:16px;background:#0c1220;border-radius:999px;overflow:hidden;border:1px solid #1a2440; margin-top: 24px;}
.timerbar > .fill{height:100%;width:0;background:linear-gradient(90deg,var(--danger),#f87171);transition:width .25s linear}

.hud{position:absolute;inset: calc(12px + var(--safe-area-inset-top, 0px) + 50px) 12px auto 12px;display:flex;gap:10px;align-items:center;z-index:3;flex-wrap:wrap}
.chip{background:#0c1626;border:1px solid #20314d;color:#cfe6ff;border-radius:999px;padding:.35rem .7rem;display:flex;align-items:center;gap:6px;white-space:normal;max-width:100%}

.task{position:absolute;left:0;top:-100px;transform:translateX(-50%); display:grid;gap:8px;align-items:center;justify-items:center; width:max(160px, 16vw); padding:12px;border-radius:14px;color:#e5f1ff; border:1px solid #21406a; background:linear-gradient(180deg, #0f243c, #0b1a2e); box-shadow:0 20px 40px rgba(0,0,0,.35);
  animation:drop linear forwards;
  cursor:pointer;
}
.task .title{font-weight:700;}
.task .emoji{font-size:22px}
.task.correct{outline:2px solid var(--ok); box-shadow:0 0 0 4px rgba(34,197,94,.15), 0 20px 40px rgba(0,0,0,.5)}
.task.wrong{animation:shake .3s; border-color:#4b1c26; box-shadow:0 0 0 3px rgba(239,68,68,.2)}

@keyframes shake{0%,100%{transform:translateX(-50%)} 25%{transform:translateX(calc(-50% - 8px))} 75%{transform:translateX(calc(-50% + 8px))}}
@keyframes drop{from{transform:translate(-50%,-120px)} to{transform:translate(-50%, calc(100vh + 100px))}}

.toast{position:absolute;left:50%;top:18px;transform:translateX(-50%);padding:.6rem .9rem;background:#0f1a2b;border:1px solid #21324f;border-radius:10px;color:#cde;opacity:0;pointer-events:none;transition:opacity .25s, transform .25s;z-index:5}
.toast.show{opacity:1;transform:translate(-50%,0)}

.finish{position:absolute;inset:0;background:rgba(10,15,25,.75);display:none;place-items:center;z-index:10}
.finish.show{display:grid}
.card{background:linear-gradient(180deg,#0f1a2b,#0a1422);border:1px solid #21324f;border-radius:18px;padding:20px;min-width:min(520px,92vw);box-shadow:var(--glow)}
.card h2{margin:0 0 6px 0}
.memes{color:#b9cce4;font-style:italic;margin:.5rem 0 1rem}

.legend{display:grid;grid-template-columns:1fr 1fr;gap:6px;color:#b6c8de}
.legend div{display:flex;align-items:center;gap:6px}
.dot{width:10px;height:10px;border-radius:999px}
.dot.ok{background:var(--ok)}
.dot.bad{background:var(--danger)}

.kbd{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;background:#0a1220;border:1px solid #1c2a46;border-bottom-width:3px;border-radius:6px;padding:2px 6px}

@media (max-width:880px){
  .wrap{grid-template-columns:1fr;grid-template-areas:"game" "sidebar";}
  .game{min-height:100%}
}

@media (max-width:600px){
  .game{min-height:100vh}
}

/* --- Fullscreen game overrides to make <main id="game"> fill the screen --- */
html, body, #root { height: 100%; width: 100%; }

/* The wrapper should not constrain width or add padding around the game */
.wrap{
  max-width: none;
  margin: 0;
  padding: 0;
  width: 100vw;
  min-height: 100vh;
  height: 100vh;
  display: block; /* no grid needed when sidebar is removed */
}

/* Make the main game panel fill the entire viewport without padding */
.panel.game, #game{
  width: 100vw;
  padding-bottom: var(--safe-area-inset-bottom, 18px);
  border-radius: 0;
  border: none;
  grid-area: auto;
}
